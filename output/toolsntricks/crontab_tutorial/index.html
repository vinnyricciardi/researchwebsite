<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>Automating with Crontab - DISHING DATA</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="../../images/favicon.png" rel="icon">

<link rel="canonical" href="../../toolsntricks/crontab_tutorial/">

        <meta name="author" content="Vinny Ricciardi" />
        <meta name="keywords" content="automation,toolsntricks" />
        <meta name="description" content="Automation with crontab Learning how to automate everyday tasks in Bash makes life easier. This small tutorial overviews the built in UNIX program called crontab. Crontab is a great tool to schedule tasks that need repeating. I use it when I need to scrape a set of webpages on a scheduled basis (see my Scrapy tutorial or to remind me to do daily tasks. Since it’s near the start of the year, and we all have New Year’s resolutions that will most likely be abandoned in February, I decided to write daily workout reminders. Here I’ll overview how to use crontab with this daily automation example." />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="../../theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="../../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../../theme/css/pygments/native.css" rel="stylesheet">
        <link href="../../theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="../../theme/css/style.css" type="text/css"/>


</head>
<body>
<script src="../../theme/js/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
    
	    <!--navbar-header-->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../" class="navbar-brand">
<img src="../../images/favicon.png" width="20"/>             </a>
        </div>
        
        <!-- Search Box -->
	  
		<!--Menuitems, collapable-->
        <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbar-collapse">
          <ul class="nav navbar-nav" id="menuitem-list">
                <li class="btn-group">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">About<b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li >
                      <a href="/aboutme/aboutdishingdata/">Dishing Data</a>
                    </li>
                    <li >
                      <a href="/aboutme/bio/">About Me</a>
                    </li>
                    <li >
                      <a href="/aboutme/curriculumvitae/">Curriculum Vitae</a>
                    </li>
                    <li >
                      <a href="mailto: vinnyricciardi@gmail.com">Email</a>
                    </li>
                  </ul>
                </li>
                <li class="btn-group">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Research Projects<b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li >
                      <a href="/smallholders/Farm_Size_Project/index.html">Farm Size</a>
                    </li>
                    <li >
                      <a href="/smallholders/Global_production/index.html">&nbsp&nbsp How much food do smallholders produce?</a>
                    </li>
                    <li >
                      <a href="/mtnadaptation/Mtn_Adaptation_Project/index.html">Mountain Farming</a>
                    </li>
                    <li >
                      <a href="/mtnadaptation/Mtn_Adaptation_Project/index.html">&nbsp&nbsp Climate adaptation in mountains: Are they enough?</a>
                    </li>
                  </ul>
                </li>
                  <li >
                    <a href="/category/toolsntricks.html">Tools and Tricks</a>
                  </li>

                  <li >
                    <a href="/news/news/index.html">News</a>
                  </li>

          </ul>
        </div>

<!-- 		<div class="collapse navbar-collapse" id="navbar-collapse">
		  <ul class="nav navbar-nav" id="menuitem-list">
				<li class="btn-group">
				  <a href="#" class="dropdown-toggle" data-toggle="dropdown">About<b class="caret"></b>
				  </a>
				  <ul class="dropdown-menu" role="menu">
					<li >
					  <a href="/aboutme/aboutdishingdata/">Dishing Data</a>
					</li>
					<li >
					  <a href="/aboutme/bio/">About Me</a>
					</li>
					<li >
					  <a href="/aboutme/curriculumvitae/">Curriculum Vitae</a>
					</li>
					<li >
					  <a href="mailto: vinnyricciardi@gmail.com">Email</a>
					</li>
				  </ul>
				</li>
				<li class="btn-group">
				  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Research Projects<b class="caret"></b>
				  </a>
				  <ul class="dropdown-menu" role="menu">
					<li >
					  <a href="/smallholders/Farm_Size_Project/index.html">Farm Size</a>
					</li>
					<li >
					  <a href="/smallholders/Global_production/index.html">&nbsp&nbsp How much food do smallholders produce?</a>
					</li>
					<li >
					  <a href="/mtnadaptation/Mtn_Adaptation_Project/index.html">Mountain Farming</a>
					</li>
					<li >
					  <a href="/mtnadaptation/Mtn_Adaptation_Project/index.html">&nbsp&nbsp Climate adaptation in mountains: Are they enough?</a>
					</li>
				  </ul>
				</li>
				  <li >
					<a href="/category/toolsntricks.html">Tools and Tricks</a>
				  </li>

				  <li >
					<a href="/news/news/index.html">News</a>
				  </li>

		  </ul>
		</div> -->
    </div>
</div> 
<!-- /.navbar -->

<div class="container">
    <div class="row">
<!--                 <div class="col-sm-9">
 -->

    <section id="content">
        <article>
            <div class="entry-content">
                
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>Automation with crontab<br /><br /></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Learning how to automate everyday tasks in Bash makes life easier. This small tutorial overviews the built in <span class="caps">UNIX</span> program called <code>crontab</code>. <code>Crontab</code> is a great tool to schedule tasks that need repeating. I use it when I need to scrape a set of webpages on a scheduled basis (see my <a href="https://vinnyricciardi.github.io/toolsntricks/scrapy_tutorial/">Scrapy tutorial</a> or to remind me to do daily&nbsp;tasks.</p>
<p>Since it&#8217;s near the start of the year, and we all have New Year&#8217;s resolutions that will most likely be abandoned in February, I decided to write daily workout reminders. Here I&#8217;ll overview how to use <code>crontab</code> with this daily automation&nbsp;example.</p>
<p>To orient you to using <code>crontab</code>, we can fire up a terminal and&nbsp;type:</p>
<blockquote><p>crontab&nbsp;-e</p>
</blockquote>
<p>This will open your default editor. If you don&#8217;t have this environmental variable set, it will most likely be the <code>nano</code> editor in <span class="caps">OSX</span> and Ubuntu (sorry, I don&#8217;t have access to a Window machine). You should see something like&nbsp;this:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Edit this file to introduce tasks to be run by cron.</span>
<span class="c1">#</span>
<span class="c1"># Each task to run has to be defined through a single line</span>
<span class="c1"># indicating with different fields when the task will be run</span>
<span class="c1"># and what command to run for the task</span>
<span class="c1">#</span>
<span class="c1"># To define the time you can provide concrete values for</span>
<span class="c1"># minute (m), hour (h), day of month (dom), month (mon),</span>
<span class="c1"># and day of week (dow) or use '*' in these fields (for 'any').#</span>
<span class="c1"># Notice that tasks will be started based on the cron's system</span>
<span class="c1"># daemon's notion of time and timezones.</span>
<span class="c1">#</span>
<span class="c1"># Output of the crontab jobs (including errors) is sent through</span>
<span class="c1"># email to the user the crontab file belongs to (unless redirected).</span>
<span class="c1">#</span>
<span class="c1"># For example, you can run a backup of all your user accounts</span>
<span class="c1"># at 5 a.m every week with:</span>
<span class="c1"># 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/</span>
<span class="c1">#</span>
<span class="c1"># For more information see the manual pages of crontab(5) and cron(8)</span>
<span class="c1">#</span>
<span class="c1"># m h  dom mon dow   command</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The very last line tells you what to do. You can set a <code>command</code> to run at a given minute (<code>m</code>), hour (<code>h</code>; in 24-hr format), day of month (<code>dom</code>; e.g., not the date, but the 1st, 2nd, 3rd, etc. day of the month), month, (<code>mon</code>), and day of week (<code>dow</code>), or you can use <code>*</code> in any of those fields to run the script at every minute, hour, day, etc. Importantly, you need to write something in every&nbsp;slot.</p>
<p>For our examples we&#8217;re going to use the program <code>notify-send</code>. If your computer doesn&#8217;t have <code>notify-send</code>, on Ubuntu you can install it&nbsp;with:</p>
<blockquote><p>sudo apt-get install&nbsp;notify-osd</p>
</blockquote>
<p>Then test to make sure it&#8217;s installed&nbsp;properly:</p>
<blockquote><p>notify-send &#8220;Workout&nbsp;time!&#8221;</p>
</blockquote>
<p>Or you can use an <a href="http://osxdaily.com/2012/08/03/send-an-alert-to-notification-center-from-the-command-line-in-os-x/"><span class="caps">OSX</span> alternative</a>.</p>
<p>Now that you&#8217;re all set up with notify send, we can jump into automating a simple daily task to tell us to&nbsp;workout.</p>
<p>For example, if we want to have a reminder go off everyday at noon, we can&nbsp;write:</p>
<blockquote><p>* 12 * * * <span class="caps">DISPLAY</span>=:0.0 && notify-send &#8220;Workout&nbsp;time!&#8221;</p>
</blockquote>
<p>This uses the command line program <code>notify-send</code> to generate a pop-up telling us to workout at noon everyday. If you wanted to go nuts and do pushups every hour (say at the 10th minute of every hour: 9:10a, 10:10a, etc.), then we can&nbsp;write:</p>
<blockquote><p>10 * * * * <span class="caps">DISPLAY</span>=:0.0 && notify-send &#8220;Workout&nbsp;time!&#8221;</p>
</blockquote>
<p>And of course we can combine these, so that we could schedule a notification to tell us to do pushups every day at&nbsp;12:10p:</p>
<blockquote><p>10 12 * * * <span class="caps">DISPLAY</span>=:0.0 && notify-send &#8220;Workout&nbsp;time!&#8221;</p>
</blockquote>
<p>We can also have one line set the command to run at many different times. The following would run at 9a, 10a, 11a, 12p, and 1p (note, do not use spaces between&nbsp;numbers).</p>
<blockquote><p>* 9,10,11,12,13 * * * <span class="caps">DISPLAY</span>=:0.0 && notify-send &#8220;Workout&nbsp;time!&#8221;</p>
</blockquote>
<p>We can also use fractions to help us not have to spell out every time. The following would run every 5&nbsp;minutes:</p>
<blockquote><p>* /5 * * * <span class="caps">DISPLAY</span>=:0.0 && notify-send &#8220;Workout&nbsp;time!&#8221;</p>
</blockquote>
<p>If you need help figuring out more ways to denote time, check out the great website: <a href="https://crontab.guru">https://crontab.guru</a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><br /></p>
<h4>Super important!!!<br /></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In order to actually load your command into <code>crontab</code> and have it queued to run, you need to save the file and in the case of using the <code>nano</code> editor you also need to close the file. To save in <code>nano</code>, press <code>ctrl-o</code> then <code>enter</code>. To exit <code>nano</code>, type <code>ctrl-x</code>.</p>
<p>One extra explanation. You may have noticed that when we do not use <code>crontab</code>, we can just type notify-send &#8220;Workout time!&#8221;, but when we do use <code>crontab</code> we have to include <span class="caps">DISPLAY</span>=:0.0. <span class="caps">DISPLAY</span>=:0.0 is needed when we try to run a graphical interface from the terminal. While the terminal will already have this feature loaded without us needing to write it explicitly, <code>crontab</code> will not have this feature loaded. This problem comes up a lot with <code>crontab</code>. So a word of advice, if you can run a command without <code>crontab</code> but have trouble when running through <code>crontab</code>, then try to load the environmental variables or <code>source ~/.bashrc</code> or <code>source ~/.profile</code> to load your environmental variable&nbsp;presets.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><br /></p>
<h4>And now for fun<br /></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One fun thing with notify-send is that you can customize it in many ways. I added cartoon images to my workout messages by using the -i&nbsp;tag:</p>
<blockquote><p>0 10 <em> </em> * export <span class="caps">DISPLAY</span>=:0.0 && notify-send -i ~/Path/to/image/pushup.jpg -t 300000 &#8220;Workout!&#8221; &#8220;Pushups: 20x2 \ncrunches 30&nbsp;x2&#8221;</p>
</blockquote>
<p><img alt="" src="../../images/pushup.jpg" /></p>
<p>So at 10a, a little notification with a cartoon of a fella doing a pushup pops up on my screen and tells me to workout. The -t tag is how long the notification will stay on my screen in&nbsp;milliseconds.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><br /></p>
<h4>Back to the main point<br /></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can use crontabs to automate hourly, daily, etc. tasks that will make your life easier. If you want to run a script instead of the notify-send, then just type something&nbsp;like:</p>
<blockquote><p>0 10 * * * python&nbsp;script.py</p>
</blockquote>
<p>The sky&#8217;s the limit with what you can&nbsp;do.</p>
<p>Happy automating!
<br /><br /><br /><br /></p>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

            </div>
            <!-- /.entry-content -->

        </article>
    </section>

        </div>
        <!--         <div class="col-sm-3" id="sidebar">
            <aside>
            </aside>
        </div>
 -->
    </div>
</div>


<footer>
   <div class="well well-lg" id="footer-well">
      <div class="container">
      <div class="row">

             <div class="col-sm-4">
                    <h3>Connect</h3>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                      <ul class="list-group" id="social" style="list-style:none; padding-left:0;">
                        <li class="list-group-item"><a href="https://www.linkedin.com/in/vinnyr/"><i class="fa fa-linkedin-square fa-lg"></i>  LinkedIn</a></li>
                        <li class="list-group-item"><a href="https://twitter.com/vinnyricciardi"><i class="fa fa-twitter-square fa-lg"></i>  Twitter</a></li>
                        <li class="list-group-item"><a href="https://github.com/vinnyricciardi/"><i class="fa fa-github-square fa-lg"></i>  GitHub</a></li>
                        <li class="list-group-item"><a href="https://www.researchgate.net/profile/Vincent_Ricciardi"><i class="fa fa-user fa-lg"></i>  Research Gate</a></li>
                        <li class="list-group-item"><a href="mailto:vinnyricciardi@gmail.com"><i class="fa fa-coffee fa-lg"></i>  Email</a></li>
                      </ul>
                    </li>
              </ul>
            </div>

           <div class="col-sm-4">
               <h3 style="margin-bottom:0.5px;">Research Affiliations</h3>
               </br></br>
               <ul style="list-style:none; padding-left:0;">
                <div style="margin-bottom: 10.5px; margin-top: 10.5px; font-size: 15px;">
                  <li >
                    <a href="http://www.ramankuttylab.com/" target="_blank">
                        Ramankutty Lab
                    </a>
                  </li>
                <div>
                <div style="margin-bottom: 10.5px; margin-top: 10.5px; font-size: 15px;">
                  <li >
                    <a href="http://ires.ubc.ca/" target="_blank">
                        Institute for Resources, Environment, and Sustainability
                    </a>
                  </li>
                <div>
                <div style="margin-bottom: 10.5px; margin-top: 10.5px; font-size: 15px;">
                  <li >
                    <a href="http://liu.arts.ubc.ca/" target="_blank">
                        Liu Institute for Global Issues
                    </a>
                  </li>
                <div>
                <div style="margin-bottom: 10.5px; margin-top: 10.5px; font-size: 15px;">
                  <li >
                    <a href="https://www.grad.ubc.ca/psi" target="_blank">
                        Public Scholars Initiative
                    </a>
                  </li>
                <div>
                <div style="margin-bottom: 10.5px; margin-top: 10.5px; font-size: 15px;">
                  <li >
                    <a href="http://alephpolicy.org/" target="_blank">
                        Aleph Policy Iniative
                    </a>
                  </li>
                <div>
              </ul>
             <!-- // <script src="https://apis.google.com/js/platform.js" async defer></script> -->
              <!-- <g:plusone size="standard(bubble)" data-href="http://the-data-show.com"></g:plusone> -->
              <br>
              <h3></h3>
                <div class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:url="../.." addthis:title="Check out DISHING DATA!">
                  <a class="addthis_button_facebook"></a>
                  <a class="addthis_button_twitter"></a>
                  <a class="addthis_button_email"></a>
                  <a class="addthis_button_linkedin"></a>
                  <a class="addthis_button_compact"></a>
                </div>
                <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
           </div>
           <div class="col-sm-4">
<div id="aboutme" align="center">
	<h3 style="margin-bottom:0.5px;">About Vinny Ricciardi</h3><br/>
        <p>
            <img width="60%" class="img-thumbnail" src="../../images/headshot.png"/>
        </p>
    <p> 
        
            Vinny Ricciardi is a PhD Candidate of<br>
            Resource Management & Environmental Studies<br>
            at the University of British Columbia.<br><br>
            
    </p>
</div>
           </div>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Vinny Ricciardi
            &middot; Powered by <a href="http://python.org/" target="_blank">Python</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            a customized <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
   </div>
</footer>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../../theme/js/respond.min.js"></script>

<!-- Fix scrolling issues to internal HREFs that get positioned behind navbar -->
<!-- http://stackoverflow.com/questions/10732690/offsetting-an-html-anchor-to-adjust-for-fixed-header -->
<script src="../../theme/js/href_scroll.js"></script>

    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-112689863-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->


</body>
</html>